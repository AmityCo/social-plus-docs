---
title: "Audio Posts"
description: "Create posts with audio files including podcasts, music, voice recordings, and sound clips"
---

Share audio content including music, podcasts, voice messages, and sound recordings. Audio posts support comprehensive metadata display with playback controls and rich text descriptions.

<CardGroup cols={2}>
  <Card title="Multiple Audio Formats" icon="file-audio">
    Support for MP3, WAV, AAC, M4A, OGG, Opus, FLAC and more
  </Card>
  <Card title="Rich Metadata" icon="waveform-lines">
    Automatic duration, bitrate, and quality information
  </Card>
</CardGroup>

## Overview

Audio posts enable sharing of audio content with automatic metadata extraction and playback support:

- **Audio Upload**: Upload audio files up to 1GB with 1 hour maximum duration
- **Metadata Extraction**: Automatic extraction of duration, bitrate, sample rate, and channels
- **Rich Captions**: Text descriptions with mentions and hashtags
- **Parent-Child Structure**: Each audio file becomes a child post
- **Playback Controls**: Integrated audio player with standard controls

| Requirement | Limit | 
|-------------|-------|
| **File Size** | Up to 1GB per file | 
| **Duration** | Maximum 1 hour | 
| **File Formats** | MP3, WAV, AAC, M4A, OGG, Opus, FLAC | 
| **Audio Count** | Maximum 10 audio files | 

<Warning>
Audio files must be uploaded first before creating the post. See [Audio Handling](/social-plus-sdk/core-concepts/content-handling/files-images-and-videos/audio-handling) for upload instructions.
</Warning>

## Quick Start

<Steps>
  <Step title="Upload Audio">
    Use the File Repository to upload your audio files and get audio data with metadata
  </Step>
  <Step title="Create Post">
    Use the audio data in your post creation request
  </Step>
  <Step title="Handle Response">
    The post will contain parent and child posts for each audio file
  </Step>
</Steps>

## Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `text` | String | ❌ | Caption text (max 10,000 characters) |
| `audios/audioFiles` | Array | ✅ | Audio data or file IDs from upload |
| `targetType` | Enum | ✅ | Target type (`user` or `community`) |
| `targetId` | String | ✅ | Target ID (`userId` or `communityId`) |
| `metadata` | Object | ❌ | Custom metadata |

## Implementation

<CodeGroup>
```swift iOS
func createAudioPostExample(audios: [AmityAudioData], text: String) async {
    // Build your post structure
    let builder = AmityAudioPostBuilder()
    builder.setText(text)
    builder.setAudios(audios)
    
    // Create a post from the builder
    do {
        let post = try await postRepository.createAudioPost(
            builder,
            targetId: nil,
            targetType: .user,
            metadata: nil,
            mentionees: nil
        )
    } catch {
        // Handle error here
        print("Failed to create audio post: \(error)")
    }
}

// Complete example with upload and post creation
func uploadAndCreateAudioPost(audioUrl: URL, text: String) async {
    do {
        // Step 1: Upload audio
        let audioData = try await fileRepository.uploadAudio(
            with: audioUrl,
            progress: { progress in
                print("Upload progress: \(progress * 100)%")
            }
        )
        
        // Step 2: Create audio post
        let builder = AmityAudioPostBuilder()
        builder.setText(text)
        builder.setAudios([audioData])
        
        let post = try await postRepository.createAudioPost(
            builder,
            targetId: "community123",
            targetType: .community,
            metadata: nil,
            mentionees: nil
        )
        
        print("Complete! Post ID: \(post.postId)")
    } catch {
        print("Error: \(error)")
    }
}
```

```kotlin Android
fun createAudioPost(
    postRepository: AmityPostRepository,
    uploadedAudio1: AmityAudio,
    uploadedAudio2: AmityAudio
) {
    postRepository.createPost()
        .targetUser(userId = "user1")
        .audio(audios = arrayOf(uploadedAudio1, uploadedAudio2))
        .text("Check out this podcast episode!")
        .build()
        .post()
        .doOnSuccess { amityPost: AmityPost ->
           
        }
        .doOnError { error ->
            Log.e("Post", "Failed to create audio post: ${error.message}")
        }
        .subscribe()
}

// Complete example with upload and post creation
fun uploadAndCreateAudioPost(audioUri: Uri, text: String) {
    // Step 1: Upload audio
    AmityCoreClient.newFileRepository()
        .uploadAudio(audioUri)
        .doOnNext { result: AmityUploadResult<AmityAudio> ->
            when (result) {
                is AmityUploadResult.PROGRESS -> {
                    val progress = result.getUploadInfo().getProgressPercentage()
                    Log.d("Upload", "Progress: $progress%")
                }
                is AmityUploadResult.COMPLETE -> {
                    val audioData = result.getFile()
                    
                    // Step 2: Create audio post
                    AmitySocialClient.newPostRepository()
                        .createPost()
                        .targetCommunity(communityId = "community123")
                        .audio(audios = arrayOf(audioData))
                        .text(text)
                        .build()
                        .post()
                        .doOnSuccess { post ->
                            Log.d("Post", "Complete! Post ID: ${post.postId}")
                        }
                        .subscribe()
                }
                is AmityUploadResult.ERROR -> {
                    Log.e("Upload", "Upload failed: ${result.getError()}")
                }
            }
        }
        .subscribe()
}
```

```typescript TypeScript
import { PostRepository, PostContentType, FileRepository } from '@amityco/ts-sdk';

async function createAudioPost(audioFileIds: string[]): Promise<Amity.Post> {
  const newPost = {
    tags: ['podcast', 'episode1'], // optional
    data: {
      text: 'Check out this podcast episode!',
    },
    attachments: audioFileIds.map(fileId => ({
      type: PostContentType.AUDIO,
      fileId: fileId,
    })),
    targetType: 'community',
    targetId: 'community123',
  };

  const { data: post } = await PostRepository.createPost(newPost);
  
  console.log('Audio post created:', post.postId);
  return post;
}

// Complete example with upload and post creation
async function uploadAndCreateAudioPost(audioFile: File): Promise<Amity.Post> {
  try {
    // Step 1: Upload audio
    const formData = new FormData();
    formData.append('files', audioFile);
    
    const { data: uploadedAudio } = await FileRepository.uploadAudio(formData);
    console.log('Upload complete:', uploadedAudio[0].fileId);
    console.log('Duration:', uploadedAudio[0].attributes.metadata.duration, 'seconds');
    
    // Step 2: Create audio post
    const newPost = {
      data: {
        text: 'New podcast episode is live!',
      },
      attachments: [{
        type: PostContentType.AUDIO,
        fileId: uploadedAudio[0].fileId,
      }],
      targetType: 'community',
      targetId: 'community123',
    };
    
    const { data: post } = await PostRepository.createPost(newPost);
    console.log('Complete! Post ID:', post.postId);
    
    return post;
  } catch (error) {
    console.error('Error:', error.message);
    throw error;
  }
}
```

</CodeGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Audio Quality">
    - Use appropriate bitrates for content type (128-192 kbps for speech, 256-320 kbps for music)
    - Choose efficient formats like AAC or Opus for better compression
    - Normalize audio levels for consistent playback
    - Consider mono for voice content to reduce file size
    
    ```typescript
    // Recommended settings for different content types
    const audioSettings = {
      podcast: { format: 'mp3', bitrate: 128, channels: 1 },
      music: { format: 'aac', bitrate: 256, channels: 2 },
      voiceNote: { format: 'opus', bitrate: 64, channels: 1 }
    };
    ```
  </Accordion>
  
  <Accordion title="User Experience">
    - Display audio duration prominently
    - Show upload progress with percentage
    - Provide audio preview before posting
    - Include meaningful captions and descriptions
    - Handle playback errors gracefully
    - Support background playback where possible
    
  </Accordion>
  
  <Accordion title="Performance">
    - Compress audio before upload to reduce file size
    - Implement progress indicators for uploads
    - Cache uploaded audio to avoid re-uploads
    - Use streaming for playback instead of full download
    - Implement retry logic for failed uploads
    
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Audio Upload Failures" icon="upload">
    **Problem**: Audio fails to upload or post creation fails
    
    **Solutions**:
    - Check file size (must be under 1GB)
    - Verify duration (must be under 1 hour)
    - Ensure format is supported (MP3, WAV, AAC, etc.)
    - Check network connection stability
    - Implement retry logic with exponential backoff
    
  </Accordion>
  
  <Accordion title="Playback Issues" icon="play">
    **Problem**: Uploaded audio won't play or has poor quality
    
    **Solutions**:
    - Verify format compatibility with target browsers/players
    - Check bitrate isn't too low (minimum 64 kbps recommended)
    - Ensure sample rate is standard (44.1kHz or 48kHz)
    - Test audio file before upload
    - Use widely supported formats (MP3, AAC)
    
  </Accordion>
  
  <Accordion title="Metadata Missing" icon="tags">
    **Problem**: Audio duration or other metadata not displayed
    
    **Solutions**:
    - Ensure audio file has valid metadata embedded
    - Use standard formats (MP3, AAC) for better metadata support
    - Re-encode file with proper metadata if needed
    - Verify metadata extraction after upload

  </Accordion>
</AccordionGroup>

<Info>
**Parent-Child Structure**: When you upload multiple audio files, the main post becomes the parent, and each audio file creates a child post that users can individually react to and comment on.
</Info>

## Common Use Cases

<CardGroup cols={2}>
  <Card title="Podcasts" icon="podcast">
    Share podcast episodes with episode descriptions and show notes
  </Card>
  <Card title="Music Sharing" icon="music">
    Share songs, albums, or tracks with artist information
  </Card>
  <Card title="Voice Messages" icon="microphone">
    Quick voice recordings for personal communication
  </Card>
  <Card title="Audio Books" icon="book-open-reader">
    Share narrated content and audiobook chapters
  </Card>
  <Card title="Sound Effects" icon="volume-high">
    Share audio samples, beats, and sound effect libraries
  </Card>
  <Card title="Interviews & Discussions" icon="comments">
    Record and share interview recordings and panel discussions
  </Card>
</CardGroup>

## Related Topics

<CardGroup cols={3}>
  <Card title="Audio Upload" href="/social-plus-sdk/core-concepts/content-handling/files-images-and-videos/audio-handling" icon="upload">
    Learn how to upload and manage audio files
  </Card>
  <Card title="Mixed Media Posts" href="./mixed-media-post" icon="layer-group">
    Combine audio with images, videos, and files
  </Card>
  <Card title="Text Posts" href="./text-post" icon="text">
    Create text-based posts with mentions and hashtags
  </Card>
</CardGroup>
