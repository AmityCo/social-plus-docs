---
title: "Room Posts"
description: "Create posts with interactive live room capabilities for co-streaming and real-time collaboration"
---

Create room posts that enable co-streaming and interactive live room experiences. Room posts support multiple hosts broadcasting together with interactive features like live chat, reactions, and real-time viewer engagement.

<CardGroup cols={2}>
  <Card title="Co-Streaming Support" icon="users-viewfinder">
    Multiple hosts can broadcast together in a single room
  </Card>
  <Card title="Interactive Collaboration" icon="handshake">
    Enable real-time collaboration between hosts and viewers
  </Card>
</CardGroup>

## Overview

Room posts enable interactive live room experiences with co-hosting capabilities. Create rooms that support multiple broadcasters, live chat, and viewer participation features.

## Room Types

| Type               | Description                                          |
| ------------------ | ---------------------------------------------------- |
| `coHosts`          | Multiple hosts can broadcast together simultaneously |

## Room Statuses

| Status              | Description                                      |
| ------------------- | ------------------------------------------------ |
| `idle`              | Room created but not yet live                    |
| `live`              | Room is currently broadcasting                   |
| `waitingReconnect`  | Temporarily disconnected, awaiting reconnection  |
| `ended`             | Broadcast has ended                              |
| `recorded`          | Recording is available for playback              |

## Parameters

| Parameter         | Type            | Required | Description                                      |
| ----------------- | --------------- | -------- | ------------------------------------------------ |
| `text`            | String          | ✅        | Post content (max 20,000 characters)             |
| `roomId`          | String          | ✅        | ID of the created room                           |
| `targetType`      | Enum            | ✅        | Target destination (community or user feed)      |
| `targetId`        | String          | ✅        | Target ID (null for own feed)                    |
| `title`           | String          | ❌        | Title for the room post                          |
| `metadata`        | Object          | ❌        | Custom fields for extended functionality         |
| `mentionUserIds`  | Set\<String\>   | ❌        | User IDs to mention in the post                  |
| `hashtags`        | Array\<String\> | ❌        | Hashtags for categorization and discovery        |

<CodeGroup>

```swift iOS
func createRoomPost(room: AmityRoom) async {
    // Build your post structure
    let builder = AmityRoomPostBuilder(
        roomId: room.roomId,
        text: "Join our interactive live room!"
    )
    // Create a room post on the current user feed.
    do {
        let post = try await postRepository.createRoomPost(
            builder,
            targetId: nil,
            targetType: .user,
            title: "Live Discussion Session",
            metadata: nil,
            mentionees: nil
        )
    } catch {
        // Handle error here
    }
}
```

```kotlin Android
fun createRoomPost(
    postRepository: AmityPostRepository,
    roomId: String
) {
    postRepository.createPost()
        .targetUser(userId = "user1")
        .room(roomId = roomId)
        .text("Join our interactive live room!")
        .title("Live Discussion Session")
        .build()
        .post()
        .doOnSuccess { amityPost: AmityPost ->
            // success
        }
        .subscribe()
}
```

```typescript TypeScript
import { PostRepository, PostContentType } from '@amityco/ts-sdk';

async function createRoomPost() {
  const roomPost = {
    dataType: PostContentType.ROOM,
    targetType: 'user',
    targetId: 'userId1',
    data: {
      text: 'Join our interactive live room!',
      roomId: 'roomId',
      title: 'Live Discussion Session',
    },
  };

  const { data: post } = await PostRepository.createPost(roomPost);

  return post;
}
```


</CodeGroup>

## Creating a Room

Before creating a room post, you need to create a room first using the Room Repository.

<CodeGroup>

```swift iOS
func createRoom() async {
    do {
        let room = try await roomRepository.createRoom(
            title: "Interactive Q&A Session",
            description: "Join us for a live discussion",
            thumbnailFileId: nil,
            metadata: nil,
            channelEnabled: true,
            parentRoomId: nil,
            participants: ["userId1", "userId2"]
        )
        // Use room.roomId to create the post
    } catch {
        // Handle error here
    }
}
```

```kotlin Android
fun createRoom(roomRepository: AmityRoomRepository) {
    roomRepository.createRoom(
        title = "Interactive Q&A Session",
        description = "Join us for a live discussion",
        thumbnailFileId = null,
        metadata = null,
        channelEnabled = true,
        parentRoomId = null,
        participants = listOf("userId1", "userId2")
    )
    .doOnSuccess { room: AmityRoom ->
        // Use room.roomId to create the post
    }
    .subscribe()
}
```

```typescript TypeScript
import { RoomRepository } from '@amityco/ts-sdk';

async function createRoom() {
  const room = await RoomRepository.createRoom({
    title: 'Interactive Q&A Session',
    description: 'Join us for a live discussion',
    thumbnailFileId: undefined,
    metadata: undefined,
    channelEnabled: true,
    parentRoomId: undefined,
    participants: ['userId1', 'userId2'],
  });

  // Use room.roomId to create the post
  return room;
}
```

</CodeGroup>

## Co-Host Management

Room posts support co-hosting, allowing multiple broadcasters to stream together. The co-host invitation system uses the same invitation repository as communities, enabling hosts to invite users to broadcast together.

### Managing Co-Host Invitations

#### For Hosts

##### Send Co-Host Invitation

Hosts can invite a user to join as a co-host during a live session. Co-hosts appear with a special badge in the chat and have broadcasting capabilities.

<Note>
Co-host invitations are sent one user at a time. To invite multiple co-hosts, call the invitation function for each user.
</Note>

**Parameters**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `userId` | string | Yes | User ID to invite as co-host |
| `roomId` | string | Yes | ID of the room |

<CodeGroup>
```swift iOS
do {
    try await room.createInvitation("<user_id>")
    print("Co-host invitation sent successfully.")
} catch {
    print("Failed to send co-host invitation: \(error.localizedDescription)")
}
```

```kotlin Android
fun inviteCoHost(
    room: AmityRoom,
    userId: String
) {
    room.createInvitation(userId)
        .doOnComplete {
            // Co-host invitation sent successfully
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
async function inviteCoHost(room: Amity.Room, userId: string) {
  try {
    await room.createInvitation(userId);
    // Handle successful invitation, e.g., show a success message
  } catch (error) {
    // Handle error, e.g., log it or show a message to the user
  }
}
```
</CodeGroup>

##### Get Sent Co-Host Invitations

Hosts can view all co-host invitations they've sent to track invitation status.

<CodeGroup>
```swift iOS
var token: AmityNotificationToken?
let repository = AmityInvitationRepository(client: client)
token = repository.getInvitations(
    targetId: room.roomId,
    targetType: .room
).observe({ collection, change, error in
    // Observe changes in the invitation collection
})
```

```kotlin Android
fun getCoHostInvitations(roomId: String) {
    AmityCoreClient.newInvitationRepository()
        .getInvitations(
            targetId = roomId,
            targetType = AmityInvitation.TargetType.ROOM.value
        )
        .doOnNext { invitations ->
            // PagingData<AmityInvitation>
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
import { InvitationRepository, InvitationTargetType } from '@amityco/ts-sdk';

function getCoHostInvitations(roomId: string) {
  const unsubscribe = InvitationRepository.getInvitations(
    {
      targetId: roomId,
      targetType: InvitationTargetType.Room,
      limit: 20,
    },
    ({ data, loading, error }) => {
      if (error) {
        // Handle the error
      }
      if (loading) {
        // Handle the loading state
      }
      if (data) {
        // Process the invitations
      }
    },
  );
  return unsubscribe;
}
```
</CodeGroup>

#### For Invited Users

##### Get My Room Invitations

Users can retrieve all their pending room co-host invitations.

<CodeGroup>
```swift iOS
var token: AmityNotificationToken?
let repository = AmityInvitationRepository(client: client)
token = repository.getMyRoomInvitations().observe({ collection, change, error in
    // Observe changes in the collection
})
```

```kotlin Android
fun getMyRoomInvitations() {
    AmityCoreClient.newInvitationRepository()
        .getMyRoomInvitations()
        .doOnNext { invitations ->
            // PagingData<AmityInvitation>
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
import { InvitationRepository } from '@amityco/ts-sdk';

function getMyRoomInvitations() {
  const unsubscribe = InvitationRepository.getMyRoomInvitations(
    { limit: 20 },
    ({ data, loading, error }) => {
      if (error) {
        // Handle the error
      }
      if (loading) {
        // Handle the loading state
      }
      if (data) {
        // Process the invitations
      }
    },
  );
  return unsubscribe;
}
```
</CodeGroup>

##### Check Co-Host Invitation Status

Check the status of a room co-host invitation.

**Status Values**

| Status | Description | User Action |
|--------|-------------|-------------|
| `pending` | Invitation awaiting response | Can accept or decline |
| `accepted` | User has accepted | Co-host in room |
| `rejected` | User has declined | No further action |
| `cancelled` | Host cancelled invitation | No longer valid |

<CodeGroup>
```swift iOS
if let invitation = await room.getInvitation() {
    switch invitation.status {
    case .pending:
        print("Co-host invitation is pending.")
    case .approved:
        print("Co-host invitation is approved.")
    case .rejected:
        print("Co-host invitation is rejected.")
    case .canceled:
        print("Co-host invitation is canceled.")
    @unknown default:
        print("Unknown invitation status.")
    }
}
```

```kotlin Android
fun getCoHostInvitationStatus(room: AmityRoom) {
    room.getInvitation()
        .doOnSuccess { invitations ->
            invitations.map { invitation ->
                when (invitation.getStatus()) {
                    AmityInvitationStatus.PENDING -> {
                        // Handle pending invitation
                    }
                    AmityInvitationStatus.APPROVED -> {
                        // Handle approved invitation
                    }
                    AmityInvitationStatus.REJECTED -> {
                        // Handle rejected invitation
                    }
                    AmityInvitationStatus.CANCELLED -> {
                        // Handle cancelled invitation
                    }
                }
            }
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
import { InvitationStatusEnum } from '@amityco/ts-sdk';

async function getCoHostInvitationStatus(room: Amity.Room) {
  const invitation = await room.getInvitation();
  if (invitation?.status === InvitationStatusEnum.Pending) {
    // Handle pending invitation
  }
  if (invitation?.status === InvitationStatusEnum.Approved) {
    // Handle approved invitation
  }
  if (invitation?.status === InvitationStatusEnum.Rejected) {
    // Handle rejected invitation
  }
  if (invitation?.status === InvitationStatusEnum.Cancelled) {
    // Handle cancelled invitation
  }
  return invitation;
}
```
</CodeGroup>

##### Accept Co-Host Invitation

Accept a pending co-host invitation to join the broadcast.

<CodeGroup>
```swift iOS
if let invitation = await room.getInvitation() {
    do {
        try await invitation.accept()
        print("Co-host invitation accepted successfully.")
    } catch {
        print("Failed to accept invitation: \(error.localizedDescription)")
    }
}
```

```kotlin Android
fun acceptCoHostInvitation(invitation: AmityInvitation) {
    invitation.accept()
        .doOnComplete {
            // Co-host invitation accepted successfully
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
async function acceptCoHostInvitation(invitation: Amity.Invitation) {
  try {
    await invitation.accept();
    // Handle successful acceptance
  } catch (error) {
    // Handle error
  }
}
```
</CodeGroup>

##### Decline Co-Host Invitation

Decline a co-host invitation if unable to join the broadcast.

<CodeGroup>
```swift iOS
if let invitation = await room.getInvitation() {
    do {
        try await invitation.reject()
        print("Co-host invitation declined successfully.")
    } catch {
        print("Failed to decline invitation: \(error.localizedDescription)")
    }
}
```

```kotlin Android
fun declineCoHostInvitation(invitation: AmityInvitation) {
    invitation.reject()
        .doOnComplete {
            // Co-host invitation declined successfully
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
async function declineCoHostInvitation(invitation: Amity.Invitation) {
  try {
    await invitation.reject();
    // Handle successful decline
  } catch (error) {
    // Handle error
  }
}
```
</CodeGroup>

### Getting Broadcaster Data

To start broadcasting in a room, retrieve the broadcaster data which contains the necessary connection information. The response type depends on your room configuration.

**Broadcast Data Types**

| Type | Description | Properties |
|------|-------------|------------|
| `CoHosts` | Multi-host co-streaming session | `coHostToken`, `coHostUrl` |

<CodeGroup>

```swift iOS
func getBroadcasterData(roomId: String) async {
    do {
        let broadcastData = try await roomRepository.getBroadcastData(roomId: roomId)
        
        switch broadcastData {
        case .coHosts(let data):
            // Use coHostToken and coHostUrl for multi-host streaming
            let token = data.coHostToken
            let url = data.coHostUrl
            // Connect to LiveKit with these credentials
        }
    } catch {
        // Handle error here
    }
}
```

```kotlin Android
fun getBroadcasterData(
    roomRepository: AmityRoomRepository,
    roomId: String
) {
    roomRepository.getBroadcastData(roomId = roomId)
        .doOnSuccess { broadcastData: AmityRoomBroadcastData ->
            when (broadcastData) {
                is AmityRoomBroadcastData.CoHosts -> {
                    // Use coHostToken and coHostUrl for multi-host streaming
                    val token = broadcastData.getCoHostToken()
                    val url = broadcastData.getCoHostUrl()
                    // Connect to LiveKit with these credentials
                }
            }
        }
        .subscribe()
}
```

```typescript TypeScript
import { RoomRepository } from '@amityco/ts-sdk';

async function getBroadcasterData(roomId: string) {
  const broadcastData = await RoomRepository.getBroadcastData(roomId);

  if (broadcastData.type === 'coHosts') {
    // Use coHostToken and coHostUrl for multi-host streaming
    const token = broadcastData.coHostToken;
    const url = broadcastData.coHostUrl;
    // Connect to LiveKit with these credentials
  }

  return broadcastData;
}
```

</CodeGroup>

### Connecting to LiveKit

After retrieving the co-host broadcast data, use the LiveKit client library to connect to the streaming server. The `coHostUrl` and `coHostToken` are used to establish the real-time connection.

#### Install the LiveKit SDK

Before connecting, ensure you have the LiveKit SDK installed in your project.

<CodeGroup>

```swift iOS
// Add via Swift Package Manager:
// https://github.com/livekit/client-sdk-swift

// Also add camera and microphone permissions to Info.plist:
// NSCameraUsageDescription
// NSMicrophoneUsageDescription
```

```kotlin Android
// Add to build.gradle
dependencies {
    implementation "io.livekit:livekit-android:2.+"
    implementation "io.livekit:livekit-android-compose-components:1.+"
}

// Add JitPack to settings.gradle
dependencyResolutionManagement {
    repositories {
        maven { url 'https://jitpack.io' }
    }
}
```

```typescript TypeScript
// Install via npm
npm install livekit-client --save

// Or using yarn
yarn add livekit-client
```

</CodeGroup>

#### Connect to the Room

Use the `coHostUrl` as the WebSocket URL and the `coHostToken` as the access token to connect.

<CodeGroup>

```swift iOS
import LiveKit

func connectToLiveKit(coHostUrl: String, coHostToken: String) async {
    // Create LiveKit Room instance (not to be confused with AmityRoom)
    let liveKitRoom = Room()
    
    do {
        try await liveKitRoom.connect(url: coHostUrl, token: coHostToken)
        print("Connected to LiveKit room successfully")
        
        // Access local participant after connection
        let localParticipant = liveKitRoom.localParticipant
        
        // Start publishing audio/video tracks
        try await localParticipant.setCamera(enabled: true)
        try await localParticipant.setMicrophone(enabled: true)
    } catch {
        print("Failed to connect: \(error.localizedDescription)")
    }
}
```

```kotlin Android
import io.livekit.android.room.Room as LiveKitRoom
import io.livekit.android.LiveKit

fun connectToLiveKit(
    broadcastData: AmityRoomBroadcastData.CoHosts
) {
    // Create LiveKit Room instance (not to be confused with AmityRoom)
    val liveKitRoom: LiveKitRoom = LiveKit.create(applicationContext)
    
    liveKitRoom.connect(
        url = broadcastData.getCoHostUrl(),
        token = broadcastData.getCoHostToken()
    )
    
    // Access local participant after connection
    val localParticipant = liveKitRoom.localParticipant
    
    // Start publishing audio/video tracks
    localParticipant.setCameraEnabled(true)
    localParticipant.setMicrophoneEnabled(true)
}
```

```typescript TypeScript
import { Room as LiveKitRoom, RoomEvent } from 'livekit-client';

async function connectToLiveKit(coHostUrl: string, coHostToken: string) {
  // Create LiveKit Room instance (not to be confused with Amity.Room)
  const liveKitRoom = new LiveKitRoom();

  // Set up event listeners before connecting
  liveKitRoom.on(RoomEvent.Connected, () => {
    console.log('Connected to LiveKit room successfully');
  });

  liveKitRoom.on(RoomEvent.Disconnected, (reason) => {
    console.log('Disconnected from room:', reason);
  });

  liveKitRoom.on(RoomEvent.Reconnecting, () => {
    console.log('Reconnecting to room...');
  });

  try {
    await liveKitRoom.connect(coHostUrl, coHostToken);
    
    // Access local participant after connection
    const localParticipant = liveKitRoom.localParticipant;
    
    // Start publishing audio/video tracks
    await localParticipant.setCameraEnabled(true);
    await localParticipant.setMicrophoneEnabled(true);
  } catch (error) {
    console.error('Failed to connect:', error);
  }

  return liveKitRoom;
}
```

</CodeGroup>

#### Disconnect from the Room

Call `disconnect()` to leave the LiveKit room when the broadcast ends.

<CodeGroup>

```swift iOS
await liveKitRoom.disconnect()
```

```kotlin Android
liveKitRoom.disconnect()
```

```typescript TypeScript
await liveKitRoom.disconnect();
```

</CodeGroup>

<Note>
For detailed setup instructions, event handling, and advanced features, refer to the official [LiveKit documentation](https://docs.livekit.io/intro/basics/connect/).
</Note>

## Best Practices

<AccordionGroup>
  <Accordion title="Room Setup">
    - Plan your room configuration before creating
    - Set appropriate title and description for discoverability
    - Enable chat channel for viewer interaction
    - Prepare participant list for co-hosting sessions
  </Accordion>
  <Accordion title="Co-Host Coordination">
    - Coordinate with co-hosts before going live
    - Establish clear roles and speaking order
    - Test audio and video connections with all hosts
    - Have a backup plan if a co-host disconnects
  </Accordion>
  <Accordion title="Viewer Engagement">
    - Interact with viewers through live chat
    - Acknowledge questions and comments in real-time
    - Use host and co-host badges for clear identification
    - Encourage participation with calls-to-action
  </Accordion>
  <Accordion title="Technical Quality">
    - Ensure stable internet for all hosts
    - Use good lighting and clear audio
    - Test streaming setup before going live
    - Monitor room status for connection issues
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Room Creation Failures" icon="triangle-exclamation">
    **Problem**: Room creation fails before post creation

    **Solutions**:

    - Verify Room SDK is properly initialized
    - Check user permissions for room creation
    - Ensure all required parameters are provided
    - Validate participant user IDs exist
  </Accordion>
  <Accordion title="Post Creation with Invalid Room" icon="link">
    **Problem**: Post creation fails with invalid room ID

    **Solutions**:

    - Verify room was created successfully
    - Check room ID is correctly passed to post creation
    - Ensure room hasn't been deleted
    - Confirm user has permission to create room posts
  </Accordion>
  <Accordion title="Co-Host Connection Issues" icon="users">
    **Problem**: Co-hosts unable to join the room

    **Solutions**:

    - Verify co-host invitation was sent successfully
    - Check co-host has accepted the invitation
    - Ensure broadcaster data is retrieved correctly
    - Validate network connectivity for all hosts

    ```typescript
    // Check room participants before broadcasting
    const room = await RoomRepository.getRoom(roomId);
    const participants = room.participants;

    participants.forEach((participant) => {
      console.log(`Participant: ${participant.userId}, Status: ${participant.status}`);
    });
    ```
  </Accordion>
  <Accordion title="Room Status Issues" icon="signal">
    **Problem**: Room stuck in unexpected status

    **Solutions**:

    - Check room status using getRoom API
    - Verify streaming connection is active
    - Use stop API to properly end the room
    - Handle waitingReconnect status appropriately

    ```typescript
    // Monitor room status
    const roomObserver = RoomRepository.getRoom(roomId);

    roomObserver.subscribe((room) => {
      switch (room.status) {
        case 'idle':
          console.log('Room ready to start');
          break;
        case 'live':
          console.log('Room is broadcasting');
          break;
        case 'waitingReconnect':
          console.log('Connection interrupted, attempting to reconnect');
          break;
        case 'ended':
          console.log('Room has ended');
          break;
        case 'recorded':
          console.log('Recording available');
          break;
      }
    });
    ```
  </Accordion>
  <Accordion title="Chat Not Working" icon="comments">
    **Problem**: Live chat not functioning in room

    **Solutions**:

    - Verify channelEnabled is set to true when creating room
    - Check channel ID is available in room object
    - Ensure users have chat permissions
    - Validate real-time connection is established

    ```typescript
    // Ensure chat is enabled when creating room
    const room = await RoomRepository.createRoom({
      title: 'Live Session',
      channelEnabled: true, // Required for chat functionality
      participants: ['userId1'],
    });

    // Access chat channel
    if (room.channelEnabled && room.channelId) {
      const channel = await ChannelRepository.getChannel(room.channelId);
    }
    ```
  </Accordion>
</AccordionGroup>

## Common Use Cases

<CardGroup cols={2}>
  <Card title="Panel Discussions" icon="users">
    Host multi-speaker panels with co-streaming support
  </Card>
  <Card title="Interactive Workshops" icon="chalkboard-user">
    Collaborative teaching sessions with multiple instructors
  </Card>
  <Card title="Live Interviews" icon="microphone">
    Conduct interviews with remote guests as co-hosts
  </Card>
  <Card title="Community Events" icon="calendar">
    Host community gatherings with featured speakers
  </Card>
</CardGroup>

## Related Topics

<CardGroup cols={3}>
  <Card title="Live Stream Posts" icon="circle-video" href="./live-stream-post">
    Create single-host live streaming posts
  </Card>
  <Card title="Video Posts" icon="film" href="./video-post">
    Create posts with pre-recorded video content
  </Card>
  <Card title="Community Engagement" icon="users" href="/social-plus-sdk/social/communities-spaces/overview">
    Build communities where rooms drive engagement
  </Card>
</CardGroup>
