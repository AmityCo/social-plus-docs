---
title: "Audio Handling"
description: "Upload and manage audio files with metadata extraction, progress tracking, and format validation"
---

social.plus provides comprehensive audio file management with support for multiple formats, automatic metadata extraction, and optimized storage. Upload music, podcasts, voice recordings, and other audio content with real-time progress tracking.

<Note>
**Audio Limits**: Maximum file size is 1GB and maximum duration is 1 hour. Files exceeding these limits will be rejected during upload.
</Note>

## Key Features

<CardGroup cols={2}>
  <Card title="Multiple Formats" icon="file-audio">
    Support for MP3, WAV, AAC, M4A, OGG, Opus, FLAC, and more
  </Card>
  <Card title="Metadata Extraction" icon="waveform-lines">
    Automatic extraction of duration, bitrate, sample rate, and channels
  </Card>
  <Card title="Progress Tracking" icon="chart-line">
    Real-time upload progress
  </Card>
  <Card title="Size & Duration Validation" icon="shield-check">
    Automatic validation against network-configured limits
  </Card>
</CardGroup>

## Supported Audio Formats

<AccordionGroup>
  <Accordion title="Common Formats" icon="music">
    | Format | Extension | MIME Type | Notes |
    |--------|-----------|-----------|-------|
    | MP3 | .mp3 | audio/mpeg | Most widely supported |
    | AAC | .aac, .m4a | audio/aac, audio/mp4 | High quality, efficient compression |
    | WAV | .wav | audio/wav | Uncompressed, high quality |
    | OGG | .ogg | audio/ogg | Open-source alternative |
  </Accordion>
  
  <Accordion title="Advanced Formats" icon="file-audio">
    | Format | Extension | MIME Type | Notes |
    |--------|-----------|-----------|-------|
    | Opus | .opus | audio/opus | Low-latency, high quality |
    | FLAC | .flac | audio/flac | Lossless compression |
    | M4A | .m4a | audio/mp4 | Apple ecosystem standard |
  </Accordion>
</AccordionGroup>

## Audio Properties

Audio files include comprehensive metadata extracted during upload:

<AccordionGroup>
  <Accordion title="Core Properties" icon="file-lines">
    | Property | Type | Description |
    |----------|------|-------------|
    | `fileId` | `string` | Unique identifier for the audio file |
    | `fileUrl` | `string` | Direct download/streaming URL |
    | `filename` | `string` | Original filename with extension |
    | `type` | `string` | Always `"audio"` for audio files |
  </Accordion>
  
  <Accordion title="Audio Metadata" icon="waveform-lines">
    | Property | Type | Description |
    |----------|------|-------------|
    | `duration` | `number` | Audio duration in seconds |
    | `bitRate` | `number` | Bitrate in bits per second |
    | `sampleRate` | `number` | Sample rate in Hz (e.g., 44100) |
    | `channels` | `number` | Number of audio channels (1 = mono, 2 = stereo) |
  </Accordion>
  
  <Accordion title="File Attributes" icon="tags">
    | Property | Type | Description |
    |----------|------|-------------|
    | `size` | `number` | File size in bytes |
    | `mimeType` | `string` | MIME type (e.g., `"audio/mpeg"`) |
    | `extension` | `string` | File extension (e.g., `"mp3"`) |
    | `name` | `string` | File name |
  </Accordion>
</AccordionGroup>

### Audio Metadata Structure

<Info>
The System automatically extracts audio metadata once uploaded, providing detailed information for playback and display:
</Info>

```json
{
  "fileId": "68cbb5e6843c17588d5240da",
  "type": "audio",
  "fileUrl": "https://api.example.com/api/v3/files/68cbb5e6843c17588d5240da/download",
  "attributes": {
    "name": "podcast_episode_01.mp3",
    "extension": "mp3",
    "size": 1059386,
    "mimeType": "audio/mpeg",
    "metadata": {
      "sample_rate": 44100,
      "duration": 58.018,
      "bit_rate": 146003,
      "channels": 2
    }
  }
}
```

## Audio Upload

Upload audio files with automatic validation, metadata extraction, and progress tracking. The SDK handles format verification and enforces network-configured size and duration limits.

<Steps>
  <Step title="Select Audio File">
    Choose an audio file from the device's file system
  </Step>
  <Step title="Upload with Progress">
    Upload the file with real-time progress tracking
  </Step>
  <Step title="Receive Audio Data">
    Get the uploaded audio data with extracted metadata
  </Step>
  <Step title="Use in Posts">
    Use the fileId to create audio posts
  </Step>
</Steps>

<CodeGroup>
```swift iOS
func uploadAudioExample(audioUrl: URL) async {
    do {
        let audioData = try await fileRepository.uploadAudio(
            with: audioUrl,
            progress: { progress in
                print("Upload progress: \(progress * 100)%")
            }
        )      
        print("Upload successful!")
        print("File ID: \(audioData.fileId)")
        
        // Use audioData.fileId to create an audio post
    } catch {
        // Handle upload errors
        if let error = error as? AmityError {
            
        }
    }
}
```

```kotlin Android
fun uploadAudio(audioUri: Uri) {
    AmityCoreClient.newFileRepository()
        .uploadAudio(audioUri)
        .doOnNext { result: AmityUploadResult<AmityAudio> ->
            when (result) {
                is AmityUploadResult.PROGRESS -> {
                    val progress: Int = result.getUploadInfo().getProgressPercentage()
                    Log.d("Upload", "Progress: $progress%")
                }
                is AmityUploadResult.COMPLETE -> {
                    val audioData: AmityAudio = result.getFile()
                    Log.d("Upload", "File ID: ${audioData.fileId}")
                    // Use audioData to create an audio post
                }
                is AmityUploadResult.ERROR -> {
                    val error = AmityError.from(result.getError())
                }
                is AmityUploadResult.CANCELLED -> {
                    Log.d("Upload", "Upload cancelled")
                }
            }
        }
        .subscribe()
}
```

```typescript TypeScript
import React from 'react';
import { FileRepository } from '@amityco/ts-sdk';

const AudioUpload = () => {
  const handleAudioUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {
    if (!event.target.files || event.target.files.length === 0) {
      return;
    }

    const audioFile = event.target.files[0];
    const data = new FormData();
    data.append('files', audioFile);

    try {
      const { data: uploadedAudio } = await FileRepository.uploadAudio(data);
      
      console.log('Upload successful!');
      console.log('File ID:', uploadedAudio[0].fileId);     
      // Use uploadedAudio[0].fileId to create an audio post
      return uploadedAudio[0];
    } catch (error) {
      // handle error
    }
  };

};
```


</CodeGroup>

## Validation & Limits

<AccordionGroup>
  <Accordion title="Size Limits" icon="database">
    **Maximum File Size: 1GB**
    
    Files exceeding 1GB are rejected before upload begins. This validation happens client-side to prevent unnecessary network usage.
    
    ```typescript
    // Example: Pre-upload validation
    if (audioFile.size > 1024 * 1024 * 1024) { // 1GB in bytes
      console.error('File size exceeds 1GB limit');
      return;
    }
    ```
  </Accordion>
  
  <Accordion title="Duration Limits" icon="clock">
    **Maximum Duration: 1 Hour (3600 seconds)**
    
    Audio files longer than 1 hour are rejected during server-side validation after metadata extraction.
    
    <Warning>
    Duration validation happens server-side, so the upload may begin before rejection occurs. Consider implementing client-side duration checks when possible.
    </Warning>
  </Accordion>
  
  <Accordion title="Format Validation" icon="file-check">
    **Supported MIME Types**
    
    The following MIME types are supported by default:
    - `audio/mpeg` (MP3)
    - `audio/wav` (WAV)
    - `audio/aac` (AAC)
    - `audio/mp4` (M4A, MP4 audio)
    - `audio/ogg` (OGG)
    - `audio/opus` (Opus)
    - `audio/flac` (FLAC)
    
    <Note>
    Network administrators can configure a custom allowlist of MIME types in the social.plus console. Check your network settings for specific restrictions.
    </Note>
  </Accordion>
</AccordionGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Audio Optimization" icon="waveform-lines">
    - **Use appropriate bitrates**: 128-192 kbps for speech, 256-320 kbps for music
    - **Choose efficient formats**: AAC or Opus for better compression than MP3
    - **Normalize audio levels**: Ensure consistent volume across files
    - **Consider mono for speech**: Reduces file size for podcasts and voice recordings
    
    ```typescript
    // Recommended settings for different use cases
    const audioSettings = {
      podcast: { format: 'mp3', bitrate: 128, channels: 1 }, // mono
      music: { format: 'aac', bitrate: 256, channels: 2 },   // stereo
      voiceNote: { format: 'opus', bitrate: 64, channels: 1 } // mono, low bitrate
    };
    ```
  </Accordion>
  
  <Accordion title="User Experience" icon="user">
    - **Show upload progress**: Display real-time progress to keep users informed
    - **Validate before upload**: Check file size and format client-side
    - **Provide audio preview**: Let users preview before uploading
    - **Handle errors gracefully**: Show clear error messages with suggested actions
    - **Support cancellation**: Allow users to cancel long uploads
    
    ```typescript
    // Example: Upload with user feedback
    const uploadWithFeedback = async (audioFile: File) => {
      setUploading(true);
      setProgress(0);
      
      try {
        const result = await uploadAudio(audioFile, {
          onProgress: (percent) => setProgress(percent)
        });
        showSuccess('Audio uploaded successfully!');
        return result;
      } catch (error) {
        showError(getErrorMessage(error));
      } finally {
        setUploading(false);
      }
    };
    ```
  </Accordion>
  
  <Accordion title="Performance" icon="gauge">
    - **Compress before upload**: Reduce file size for faster uploads
    - **Use background uploads**: Don't block UI during upload
    - **Implement retry logic**: Handle network failures gracefully
    - **Cache uploaded files**: Avoid re-uploading the same file
    - **Validate early**: Check constraints before starting upload
    
    ```typescript
    // Example: Retry logic with exponential backoff
    async function uploadWithRetry(audioFile: File, maxRetries = 3) {
      for (let i = 0; i < maxRetries; i++) {
        try {
          return await uploadAudio(audioFile);
        } catch (error) {
          if (i === maxRetries - 1) throw error;
          await delay(Math.pow(2, i) * 1000); // Exponential backoff
        }
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Upload Failures" icon="circle-exclamation">
    **Problem**: Audio upload fails or times out
    
    **Common Causes & Solutions**:
    
    1. **File Size Exceeded**
       - Error: File size exceeds 1GB limit
       - Solution: Compress audio or reduce bitrate/sample rate
       
    2. **Duration Exceeded**
       - Error: Audio duration exceeds 1 hour
       - Solution: Split long audio into multiple files or trim content
       
    3. **Unsupported Format**
       - Error: Audio format not supported
       - Solution: Convert to a supported format (MP3, AAC, WAV, etc.)
       
    4. **Network Timeout**
       - Error: Request timeout or network error
       - Solution: Implement retry logic, check internet connection
    
    ```typescript
    // Example: Error handling with specific actions
    try {
      await uploadAudio(file);
    } catch (error) {
      switch (error.code) {
        case 'FILE_SIZE_EXCEEDED':
          return compressAndRetry(file);
        case 'DURATION_EXCEEDED':
          return suggestSplitting(file);
        case 'UNSUPPORTED_FORMAT':
          return suggestConversion(file);
        case 'NETWORK_ERROR':
          return retryWithBackoff(file);
        default:
          return showGenericError(error);
      }
    }
    ```
  </Accordion>
  
  <Accordion title="Metadata Issues" icon="tags">
    **Problem**: Missing or incorrect metadata
    
    **Solutions**:
    - Ensure audio file has valid metadata embedded
    - Use standard audio formats (MP3, AAC) for better metadata support
    - Re-encode file with proper metadata if needed
    
    ```typescript
    // Check metadata after upload
    if (!audioData.attributes?.metadata?.duration) {
      console.warn('Duration metadata missing - may need to re-encode');
    }
    ```
  </Accordion>
  
  <Accordion title="Playback Issues" icon="play">
    **Problem**: Uploaded audio won't play or has quality issues
    
    **Solutions**:
    - Verify format is supported by target platform browsers/players
    - Check bitrate isn't too low (min 64 kbps recommended)
    - Ensure sample rate is standard (44.1kHz or 48kHz)
    - Test playback URL directly in browser
    
    ```typescript
    // Validate audio quality settings
    const isQualityAcceptable = (metadata: AudioMetadata) => {
      return metadata.bit_rate >= 64000 && // At least 64 kbps
             [44100, 48000].includes(metadata.sample_rate); // Standard sample rates
    };
    ```
  </Accordion>
</AccordionGroup>

## Common Use Cases

<CardGroup cols={2}>
  <Card title="Podcasts" icon="podcast">
    Upload podcast episodes with chapter markers and metadata
  </Card>
  <Card title="Music Sharing" icon="music">
    Share songs, albums, or playlists with high-quality audio
  </Card>
  <Card title="Voice Messages" icon="microphone">
    Quick voice recordings for personal communication
  </Card>
  <Card title="Audio Books" icon="book-open-reader">
    Share narrated content and audiobook chapters
  </Card>
  <Card title="Sound Effects" icon="volume-high">
    Upload audio samples and sound effects libraries
  </Card>
  <Card title="Interviews" icon="comments">
    Record and share interview recordings and discussions
  </Card>
</CardGroup>

## Related Topics

<CardGroup cols={3}>
  <Card title="Audio Posts" href="/social-plus-sdk/social/content-management/posts/creation/audio-post" icon="file-audio">
    Create posts with audio attachments
  </Card>
  <Card title="Mixed Media Posts" href="/social-plus-sdk/social/content-management/posts/creation/mixed-media-post" icon="layer-group">
    Combine audio with images, videos, and files
  </Card>
  <Card title="File Handling" href="./file" icon="file">
    General file upload and management
  </Card>
</CardGroup>
