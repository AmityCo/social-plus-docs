---
title: "Co-Host Management"
description: "Invite, manage, and coordinate co-hosts for collaborative room broadcasting"
---

# Co-Host Management

Room posts support co-hosting, allowing multiple broadcasters to stream together. This guide covers the complete co-host invitation system, from sending invitations to managing co-host participation during broadcasts.

## Overview

Co-hosts are invited broadcasters who can stream together with the room host. They appear with a special badge in the chat and have broadcasting capabilities within the room.

<CardGroup cols={2}>
  <Card title="Invite Co-Hosts" icon="user-plus">
    Send invitations to users to join as broadcasters
  </Card>
  <Card title="Accept/Decline" icon="check-double">
    Invited users can accept or decline invitations
  </Card>
  <Card title="Track Status" icon="list-check">
    Monitor invitation status in real-time
  </Card>
  <Card title="Co-Stream" icon="users-viewfinder">
    Multiple hosts broadcast together simultaneously
  </Card>
</CardGroup>

## For Hosts

### Send Co-Host Invitation

Hosts can invite users to join as co-hosts during a live session. Co-host invitations are sent one user at a time.

<Note>
Co-host invitations are sent one user at a time. To invite multiple co-hosts, call the invitation function for each user.
</Note>

**Parameters**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `userId` | string | Yes | User ID to invite as co-host |
| `roomId` | string | Yes | ID of the room |

<CodeGroup>
```swift iOS
do {
    try await room.createInvitation("<user_id>")
    print("Co-host invitation sent successfully.")
} catch {
    print("Failed to send co-host invitation: \(error.localizedDescription)")
}
```

```kotlin Android
fun inviteCoHost(
    room: AmityRoom,
    userId: String
) {
    room.createInvitation(userId)
        .doOnComplete {
            // Co-host invitation sent successfully
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
async function inviteCoHost(room: Amity.Room, userId: string) {
  try {
    await room.createInvitation(userId);
    // Handle successful invitation, e.g., show a success message
  } catch (error) {
    // Handle error, e.g., log it or show a message to the user
  }
}
```
</CodeGroup>

### Get Sent Co-Host Invitations

Hosts can view all co-host invitations they've sent to track invitation status.

<CodeGroup>
```swift iOS
var token: AmityNotificationToken?
let repository = AmityInvitationRepository(client: client)
token = repository.getInvitations(
    targetId: room.roomId,
    targetType: .room
).observe({ collection, change, error in
    // Observe changes in the invitation collection
})
```

```kotlin Android
fun getCoHostInvitations(roomId: String) {
    AmityCoreClient.newInvitationRepository()
        .getInvitations(
            targetId = roomId,
            targetType = AmityInvitation.TargetType.ROOM.value
        )
        .doOnNext { invitations ->
            // PagingData<AmityInvitation>
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
import { InvitationRepository, InvitationTargetType } from '@amityco/ts-sdk';

function getCoHostInvitations(roomId: string) {
  const unsubscribe = InvitationRepository.getInvitations(
    {
      targetId: roomId,
      targetType: InvitationTargetType.Room,
      limit: 20,
    },
    ({ data, loading, error }) => {
      if (error) {
        // Handle the error
      }
      if (loading) {
        // Handle the loading state
      }
      if (data) {
        // Process the invitations
      }
    },
  );
  return unsubscribe;
}
```
</CodeGroup>

### Cancel Co-Host Invitation

Hosts can cancel pending invitations before they are accepted.

<CodeGroup>
```swift iOS
do {
    try await invitation.cancel()
    print("Invitation cancelled successfully")
} catch {
    print("Failed to cancel invitation: \(error.localizedDescription)")
}
```

```kotlin Android
fun cancelInvitation(invitation: AmityInvitation) {
    invitation.cancel()
        .doOnComplete {
            // Invitation cancelled successfully
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
async function cancelInvitation(invitation: Amity.Invitation) {
  try {
    await invitation.cancel();
    // Handle successful cancellation
  } catch (error) {
    // Handle error
  }
}
```
</CodeGroup>

## For Invited Users

### Get My Room Invitations

Users can retrieve all their pending room co-host invitations.

<CodeGroup>
```swift iOS
var token: AmityNotificationToken?
let repository = AmityInvitationRepository(client: client)
token = repository.getMyRoomInvitations().observe({ collection, change, error in
    // Observe changes in the collection
})
```

```kotlin Android
fun getMyRoomInvitations() {
    AmityCoreClient.newInvitationRepository()
        .getMyRoomInvitations()
        .doOnNext { invitations ->
            // PagingData<AmityInvitation>
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
import { InvitationRepository } from '@amityco/ts-sdk';

function getMyRoomInvitations() {
  const unsubscribe = InvitationRepository.getMyRoomInvitations(
    { limit: 20 },
    ({ data, loading, error }) => {
      if (error) {
        // Handle the error
      }
      if (loading) {
        // Handle the loading state
      }
      if (data) {
        // Process the invitations
      }
    },
  );
  return unsubscribe;
}
```
</CodeGroup>

### Check Co-Host Invitation Status

Check the status of a room co-host invitation.

**Status Values**

| Status | Description | User Action |
|--------|-------------|-------------|
| `pending` | Invitation awaiting response | Can accept or decline |
| `accepted` | User has accepted | Co-host in room |
| `rejected` | User has declined | No further action |
| `cancelled` | Host cancelled invitation | No longer valid |

<CodeGroup>
```swift iOS
if let invitation = await room.getInvitation() {
    switch invitation.status {
    case .pending:
        print("Co-host invitation is pending.")
    case .approved:
        print("Co-host invitation is approved.")
    case .rejected:
        print("Co-host invitation is rejected.")
    case .canceled:
        print("Co-host invitation is canceled.")
    @unknown default:
        print("Unknown invitation status.")
    }
}
```

```kotlin Android
fun getCoHostInvitationStatus(room: AmityRoom) {
    room.getInvitation()
        .doOnSuccess { invitations ->
            invitations.map { invitation ->
                when (invitation.getStatus()) {
                    AmityInvitationStatus.PENDING -> {
                        // Handle pending invitation
                    }
                    AmityInvitationStatus.APPROVED -> {
                        // Handle approved invitation
                    }
                    AmityInvitationStatus.REJECTED -> {
                        // Handle rejected invitation
                    }
                    AmityInvitationStatus.CANCELLED -> {
                        // Handle cancelled invitation
                    }
                }
            }
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
import { InvitationStatusEnum } from '@amityco/ts-sdk';

async function getCoHostInvitationStatus(room: Amity.Room) {
  const invitation = await room.getInvitation();
  if (invitation?.status === InvitationStatusEnum.Pending) {
    // Handle pending invitation
  }
  if (invitation?.status === InvitationStatusEnum.Approved) {
    // Handle approved invitation
  }
  if (invitation?.status === InvitationStatusEnum.Rejected) {
    // Handle rejected invitation
  }
  if (invitation?.status === InvitationStatusEnum.Cancelled) {
    // Handle cancelled invitation
  }
  return invitation;
}
```
</CodeGroup>

### Accept Co-Host Invitation

Accept a pending co-host invitation to join the broadcast.

<CodeGroup>
```swift iOS
if let invitation = await room.getInvitation() {
    do {
        try await invitation.accept()
        print("Co-host invitation accepted successfully.")
    } catch {
        print("Failed to accept invitation: \(error.localizedDescription)")
    }
}
```

```kotlin Android
fun acceptCoHostInvitation(invitation: AmityInvitation) {
    invitation.accept()
        .doOnComplete {
            // Co-host invitation accepted successfully
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
async function acceptCoHostInvitation(invitation: Amity.Invitation) {
  try {
    await invitation.accept();
    // Handle successful acceptance
  } catch (error) {
    // Handle error
  }
}
```
</CodeGroup>

### Decline Co-Host Invitation

Decline a co-host invitation if unable to join the broadcast.

<CodeGroup>
```swift iOS
if let invitation = await room.getInvitation() {
    do {
        try await invitation.reject()
        print("Co-host invitation declined successfully.")
    } catch {
        print("Failed to decline invitation: \(error.localizedDescription)")
    }
}
```

```kotlin Android
fun declineCoHostInvitation(invitation: AmityInvitation) {
    invitation.reject()
        .doOnComplete {
            // Co-host invitation declined successfully
        }
        .doOnError { error ->
            // Handle error
        }
        .subscribe()
}
```

```typescript TypeScript
async function declineCoHostInvitation(invitation: Amity.Invitation) {
  try {
    await invitation.reject();
    // Handle successful decline
  } catch (error) {
    // Handle error
  }
}
```
</CodeGroup>

## Co-Host Joining the Broadcast

After accepting an invitation, co-hosts need to get their broadcast data and connect to LiveKit:

<CodeGroup>
```swift iOS
import LiveKit

func joinAsBroadcaster(roomId: String) async {
    do {
        // 1. Get broadcaster credentials
        let broadcastData = try await roomRepository.getBroadcastData(roomId: roomId)
        
        guard case .coHosts(let data) = broadcastData else {
            print("Invalid broadcast data")
            return
        }
        
        // 2. Connect to LiveKit
        let liveKitRoom = Room()
        try await liveKitRoom.connect(url: data.coHostUrl, token: data.coHostToken)
        
        // 3. Start publishing tracks
        try await liveKitRoom.localParticipant.setCamera(enabled: true)
        try await liveKitRoom.localParticipant.setMicrophone(enabled: true)
        
        print("Joined broadcast as co-host!")
    } catch {
        print("Failed to join: \(error)")
    }
}
```

```kotlin Android
fun joinAsBroadcaster(roomId: String) {
    roomRepository.getBroadcastData(roomId = roomId)
        .subscribe({ broadcastData ->
            when (broadcastData) {
                is AmityRoomBroadcastData.CoHosts -> {
                    // Connect to LiveKit
                    val liveKitRoom = LiveKit.create(context)
                    liveKitRoom.connect(
                        url = broadcastData.getCoHostUrl(),
                        token = broadcastData.getCoHostToken()
                    )
                    
                    // Start publishing tracks
                    liveKitRoom.localParticipant.setCameraEnabled(true)
                    liveKitRoom.localParticipant.setMicrophoneEnabled(true)
                    
                    Log.d("CoHost", "Joined broadcast as co-host!")
                }
            }
        }, { error ->
            Log.e("CoHost", "Failed to join: ${error.message}")
        })
}
```

```typescript TypeScript
import { RoomRepository } from '@amityco/ts-sdk';
import { Room as LiveKitRoom } from 'livekit-client';

async function joinAsBroadcaster(roomId: string) {
    try {
        // 1. Get broadcaster credentials
        const broadcastData = await RoomRepository.getBroadcastData(roomId);
        
        if (broadcastData.type !== 'coHosts') {
            console.log('Invalid broadcast data');
            return;
        }
        
        // 2. Connect to LiveKit
        const liveKitRoom = new LiveKitRoom();
        await liveKitRoom.connect(
            broadcastData.coHostUrl,
            broadcastData.coHostToken
        );
        
        // 3. Start publishing tracks
        await liveKitRoom.localParticipant.setCameraEnabled(true);
        await liveKitRoom.localParticipant.setMicrophoneEnabled(true);
        
        console.log('Joined broadcast as co-host!');
        return liveKitRoom;
    } catch (error) {
        console.error('Failed to join:', error);
    }
}
```
</CodeGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Before the Broadcast">
    - Coordinate with co-hosts before going live
    - Establish clear roles and speaking order
    - Test audio and video connections with all hosts
    - Have a backup plan if a co-host disconnects
  </Accordion>
  <Accordion title="Invitation Management">
    - Send invitations early to give users time to prepare
    - Handle expired or cancelled invitations gracefully
    - Provide clear UI feedback for invitation status
    - Allow hosts to re-invite users who declined
  </Accordion>
  <Accordion title="During the Broadcast">
    - Monitor co-host connection status
    - Handle co-host disconnection gracefully
    - Use host and co-host badges for clear identification
    - Coordinate mute/unmute to avoid audio issues
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Invitation Not Received" icon="envelope">
    **Problem**: User doesn't see the co-host invitation
    
    **Solutions**:
    - Verify the user ID is correct
    - Check that the room is in a valid state
    - Ensure the user has permissions to receive invitations
    - Try re-sending the invitation
  </Accordion>
  <Accordion title="Cannot Join After Accepting" icon="door-open">
    **Problem**: Co-host accepted but can't join broadcast
    
    **Solutions**:
    - Verify the room is still live
    - Check that broadcast data is retrieved correctly
    - Ensure network connectivity is stable
    - Validate LiveKit connection credentials
  </Accordion>
  <Accordion title="Co-Host Connection Issues" icon="plug">
    **Problem**: Co-hosts frequently disconnecting
    
    **Solutions**:
    - Check network stability for all participants
    - Monitor bandwidth requirements
    - Consider reducing video quality
    - Implement reconnection logic
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Start Broadcasting" href="./start-broadcasting" icon="play">
    Get broadcaster data and connect to LiveKit
  </Card>
  <Card title="Camera Controls" href="./camera-controls" icon="camera">
    Control camera, microphone, and video settings
  </Card>
  <Card title="Live Viewing" href="./live-viewing" icon="eye">
    How viewers watch your live broadcast
  </Card>
  <Card title="Manage Rooms" href="./manage-rooms" icon="gear">
    Query, update, and control room lifecycle
  </Card>
</CardGroup>
